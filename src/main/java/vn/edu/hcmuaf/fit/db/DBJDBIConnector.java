package vn.edu.hcmuaf.fit.db;


import com.mysql.jdbc.jdbc2.optional.MysqlDataSource;
import org.jdbi.v3.core.Jdbi;

public class DBJDBIConnector {
    private static Jdbi jdbi;
    private static void makeConnect(){
        MysqlDataSource dataSource = new MysqlDataSource();
        dataSource.setURL("jdbc:mysql//" + DBProperties.getDBHost() + ":"+ DBProperties.getDBPort()+"/"+ DBProperties.getDBName());
        dataSource.setUser(DBProperties.getUsername());
        dataSource.setPassword(DBProperties.getPassword());
        dataSource.setUseCompression(true);
        dataSource.setAutoReconnect(true);

        jdbi = Jdbi.create(dataSource);
    }
    private  DBJDBIConnector(){

    } public static Jdbi get(){
        if(jdbi == null) makeConnect();
        return jdbi;
    }

}
